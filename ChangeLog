DarkStar ChangeLog


2002/06/02

 * [tabkey.dsm 0.6.9] The assign procedure should now handle the removal
   of variables in the same way that the set procedure does.

 * [window.dsm 0.5.1] Windows created with new_hide were not having
   double turned on when STATUS.DOUBLE was true.

 * When VERBOSE_LOAD is false, the /loadmod and /unloadmod aliases no
   longer display the number of failed modules unless it is greater than 0.
   The half second delay before resetting the input prompt to its normal
   value was also removed.

 * Pass the return value of $winserv() to the calls to $servername()
   in the status bars that use it. This ensures we display the correct
   server for the current window when connected to multiple servers.
   This problem was discovered by whitefang.

 * [tabkey.dsm 0.6.8] Added two new completion procedures called
   tabkey.proc.assign and tabkey.proc.generic. Several new rules were
   also added for /assign, /push, /pop, /shift, and /unshift to
   complete their first argument.

 * The bitchx theme was using $padleft() in the SET and SET_NOVALUE
   formats. It now uses $pad() instead.


!! RELEASE: 0.2.6 (2002/06/01) !!


2002/06/01

 * Added help pages for all the functions provided by the core scripts.

 * Removed the $padleft() function.

 * The $convert.num() and $convert.onoff() functions were renamed to
   $bool_to_onoff() and $bool_to_num(). I'm still not sure I like these
   names, but it's an improvement.

 * All prompts (/input) in the core scripts are now preceeded by the
   the current value of $INPUT_PROMPT. I think I like this better.

 * Added a VERBOSE_LOAD config variable to the core scripts. It has a
   boolean value and, when true, the loading and unloading of modules
   will remain as it has always been.

   e.g. *** Module [foo] has been loaded

   If it is false, a message will not be displayed about individual
   modules unless there is an error. Instead, the input prompt will
   display your progress and a final tally of the results will be
   displayed in the current window. The default value is false.

2002/05/31

 * [window.dsm 0.5]

   Removed AUTO_CREATE_WINDOW_ARGS in favor of just using a window_create
   hook to turn double on/off depending on $STATUS.DOUBLE and the
   single_status array.

   The window module will now automatically add/remove shortcut aliases
   like /1, /2, /3, etc. at load time and when windows are created or killed.

   The window module should now only create windows up to a refnum equal
   to the value of the AUTO_CREATE_WINDOWS config variable.

   The default value for AUTO_CREATE_WINDOWS has been lowered to 2.
   This should dramatically improve load times.

 * All of the status bars (with the exception of "epic4") now limit the
   number of characters that will be displayed for channels and servers.
   The benefits of this are pretty obvious if you join a channel with
   30+ characters in its name.
   
 * Added a theme and statbar called "echoes" by special request from keerf.
   This is a near exact clone of the theme/statbar by the same name, included
   with LiCe.

 * [window.dsm 0.4.2] Fixed some key binding issues with debug.dsm and
   the F keys. These two modules should now be completely independent
   of each other.

2002/05/30

 * The format variables for the various modules now have descriptions in
   their help pages.

 * [channel.dsm 0.5.2] Added a CHANNEL_NICK format variable. The difference
   between this and the NICKNAME variable (from misc.dsm) is that you must
   be on a channel for this to be used, and it will be triggered for each
   channel the nick change relates to. If both this variable and the
   NICKNAME format variable are present, CHANNEL_NICK will be used when
   on channels.

 * [misc.dsm 0.7.3] Added a NICKNAME format variable.

2002/05/27

 * Added a new module called debug and moved the debugging code
   from sample.dsrc into it.

2002/05/26

 * Did some cleaning and organizing of code throughout the core scripts
   and modules. I don't expect this to break anything, but it's possible.

 * The /unloadmod alias was still trying to call /loadedmodules, which
   no longer exists. It now displays a list of loaded modules itself.

2002/05/25

 * [misc.dsm 0.7.1] Change of behavior for the WHOIS_CHANNELS* format
   variables. If a value for WHOIS_CHANNELS_WRAP exists then the channels
   will still be displayed over multiple lines, but the WHOIS_CHANNELS
   variable will be used for the first line. Requested by dh.

2002/05/24

 * [window.dsm 0.4] HEADS UP: The AUTO_BIND_ON_JOIN and AUTO_UNBIND_ON_PART
   config variables have been renamed to BIND_ON_JOIN and BIND_ON_PART.
   This is an attempt to get rid of some of the AUTO_* config variables.
   More of these changes will likely follow.

 * Removed the /loadedmodules and /loadedmods aliases.

 * The output from /modlist is now configurable via format variables.
   The following variables were added to the core: MODLIST_FOOTER[1|2],
   MODLIST_HEADER[1|2], MODLIST_MODULE.

 * [names.dsm 0.4] New behavior for the NAMES_COL config variable. If its
   value is left empty or set to 0 then there will be an infinite number
   of columns. This solves a problem in the scrollz theme and also allows
   us to truly mimic EPIC's real default output in the epic4 theme.

   The NAMES_LEFT and NAMES_RIGHT formats are now passed the same arguments
   as the header/footer formats. This fixes a minor bug in the scrollz theme
   and allows for greater customization.

 * [channel.dsm 0.5] Removed the SHOW_OPVOICE_IN_PUBLICS config variable
   because it is possible to provide that functionality in the PUBLIC*
   format variables. Also added a KICK format variable.

 * [misc.dsm 0.7] Added a new format variable called WHOIS_CHANNELS_WRAP
   that, if present, will be used instead of WHOIS_CHANNELS. The user's
   channels will be broken into multiple lines before being displayed in
   order to prevent linewrap.

 * [relay.dsm 0.4] Added a boolean config variable called RELAY_STRIP_CRAP.
   If true, all escape sequences will be stripped from the $fparse()
   output before being sent to the target.


!! RELEASE: 0.2.5 (2002/05/22) !!


2002/05/22

 * [misc.dsm 0.6.2] Removed /pingme and added a /ping alias. If no target
   is specified, it will default to your current nickname (the equivalent
   of /pingme).

2002/05/21

 * [names.dsm 0.3.1] Added a new format variable called NAMES_MID.
   If present, it will be inserted between the nicknames being displayed.
   Requested by dh.

 * [relay.dsm 0.3] Rewrote portions of the module and added several
   new types, as well as a -clear option (/clearrelaybuf was removed).
   See ds:relay(3) for details.

2002/05/20

 * The relay module has been added to the default auto-load list.

 * Added extra header and footer format variables in channel.dsm,
   misc.dsm, and names.dsm. This will allow for multi-line headers
   and footers. Requested by dh.

 * [names.dsm 0.3] New boolean config variable: NAMES_SORT_BY_MODE.
   If true, +o users will be displayed before everyone else.

 * The module loader will now remove any arrays that are obviously
   associated with a specific module, as is done for aliases and
   assigns already.

   e.g. An array named foo.bar would be removed automatically when
   the module named foo was unloaded. An array named foobar would
   not be removed automatically.

   Naming your arrays in this way is also beneficial because it helps
   prevent modules from interfering with each other.

2002/05/18

 * Attemping to name a module "core" will now result in an error,
   as this name is reserved for the core scripts.

 * Some changes to the appearance of the module lists in order to
   improve readability.

 * Extra information will now be displayed for new users whenever
   darkstar.irc has to create the user directory.

2002/05/17

 * Added a relay module, finally. This should make several people
   very happy. :-)

 * Added a ScrollZ-like theme (named 'scrollz' of course) as well
   as a status bar to match.


!! RELEASE: 0.2.4 (2002/05/16) !!


2002/05/16

 * Bug in help.dsc, involving /defer, discovered and fixed by whitefang.

 * HEADS UP: I added a 'dcc' module and moved all of the DCC related
   stuff in misc.dsm over to it. This means that you must have the new
   dcc module loaded in order to have the DCC_CHAT and SEND_DCC_CHAT
   format variables. You will probably want to add this new module to
   the AUTO_LOAD_MODULES list and update your themes if you have any.
   This also adds DCC autoget support, which can be toggled via the
   DCC_AUTOGET config variable.

2002/05/15

 * [misc.dsm 0.4.1] WHOIS_IDENTIFIED now also works on DALnet.

2002/05/13

 * [away.dsm 1.3] New config variable: AWAY_LOG_LEVEL. It will be used
   to determine what exactly gets logged while you are away. Currently,
   its value can be any combination of MSGS, NOTICES, and PUBLICS.
   If the PUBLICS level is set, only publics containing your nick will
   be logged. This was requested by synker.

2002/05/11

 * Modules located in the user directory can now override the modules
   provided in the official script pack.

 * In the process of making the above change, I also changed the name of
   the array containing module version strings from "module_version" to
   "module_versions". This was mostly done for consistency and shouldn't
   affect anyone but me. :-)

2002/05/08

 * [misc.dsm 0.4] Added a /tig alias for removing ignores. It works just
   like /tban from channel.dsm.

 * Removed autocycle.dsm from the official script pack. I will distribute
   it separately on my site(s).


!! RELEASE: 0.2.3 (2002/05/07) !!


2002/05/05

 * Changes to the whois, msg, and notice formats in the darkstar and
   feedback themes.

 * Added two new functions to the core: $ansicparse() and $serverrefs().

 * [channel.dsm 0.3.2] Added two new aliases: /mme and /msay

 * Added doc/modules.txt, a guide to module writing and the first in-depth
   documentation of the core scripts. Woo!

 * The name of the script pack has been officially changed from Darkstar to
   DarkStar. ;)

2002/05/02

 * [names.dsm 0.2.1] I wasn't cleaning up any of the /on hooks when the
   module is unloaded.

2002/04/27

 * [away.dsm 1.2.6] I wasn't properly passing the userhost to away.log when
   logging notices. This caused the first word of the text to be placed in
   the nick field, and the nick to be placed in the userhost field.

2002/04/22

 * Added a doc directory as well as the beginnings of a FAQ.

 * HEADS UP: The master file for themes is now named main.dst instead of
   being named after the theme. This eliminates the need to rename both the
   theme's directory and the .dst file when copying an existing theme.

2002/04/18

 * [names.dsm 0.2] New format variables: NAMES_LEFT and NAMES_RIGHT. These
   can be used to set the left and right borders for names output.

 * Some color related fixes to the bitchx status bar.

2002/04/16

 * Removed $round()


!! RELEASE: 0.2.2 (2002/04/15) !!


2002/04/15

 * Fixed a small bug in save.dsc involving a missing "if"

2002/04/10

 * [misc.dsm 0.3] New config variable: IGNORE_CTCP_FINGER. If true,
   all CTCP FINGER requests will be ignored.

2002/04/09

 * [misc.dsm 0.2] New format variables: WHO_FOOTER and WHO_HEADER.
   The /COLORS alias was also removed.

 * Turning window double on/off is now handled by status.change() in
   status.dsc instead of in the status files themselves. All that is
   required is that the status file set STATUS.DOUBLE to true or false.
   Windows in the single_status array are still exempt from being double.

 * New theme: bitchx

2002/04/08

 * [channel.dsm 0.3.1] New format variable: TOPIC_UNSET

2002/04/07

 * We weren't cleaning up our file descriptors in /LESS thus causing the
   client to eventually give an error message like "Unable to open file,
   too many files open", and not open the file. This also affects the
   away module since /READLOG uses /LESS to display the log. Major oops.

2002/04/05

 * [tabkey.dsm 0.6.3] Fixed a bug where nicks were not being properly added
   to the msg history when establishing a DCC CHAT connection. The error
   msg is as follows.

   ASSIGN names may not contain '-' (You asked for [TABKEY.NICKS.-1])
   ASSIGN names may not contain '-' (You asked for [TABKEY.INDEX.-1])

 * [nickcomp.dsm 1.0.1] If nick completion was turned off, lines typed at
   the input_prompt matching "%: *" would just get thrown away. This should
   no longer be the case.


!! RELEASE: 0.2.1 (2002/04/03) !!


2002/04/03

 * [channel.dsm 0.3] New config variable: MAX_MODES. This is used by
   all commands that set multiple modes to determine how many modes to
   send at a time to the server. The defualt value is 4. You will want
   to adjust this to the highest setting that your server allows.

 * The DARKSTAR_USER environment variable has been renamed to DARKSTAR_USERDIR

2002/04/02

 * [tabkey.dsm 0.6.2] Fixed a bug that was causing msg completion to not
   properly keep track of which server a msg originated from. This was
   discovered by whitefang.

2002/04/01

 * [channel.dsm 0.2.5] Several shortcut aliases were broken. Oops.

 * darkstar.irc now attempts to use $loadinfo() to determine a value for
   $DS.HOME if the DARKSTAR_HOME environment variable is not set. It will
   still fall back to the old method (just setting it to ~/darkstar) if
   the first two methods fail. This means that you can now install darkstar
   anywhere without bothering to set DARKSTAR_HOME, a big improvement. :-)

2002/03/31

* /DINFO now displays the output from $pipe(uptime) in the OS field.

* Added $pipe() from epic4/script/pipe. This was written by Jeremy Nelson.

* /RELOAD now executes the cleanup queues of all loaded modules before
  loading darkstar.irc. This will probably make it a little bit slower,
  but it fixes an issue with the msg window (window.dsm) and I think
  it is a good idea.


!! RELEASE: 0.2.0 (2002/03/29) !!


3/29/02

 * [window.dsm 0.3.2] Removed the AUTO_BIND_ON_WINDOW_JOIN config variable
   since it was redundant. The existing AUTO_BIND_ON_JOIN should do the
   trick. We're also now taking advantage of the single_status array for
   the msg window.

 * Both the 'darkstar' and 'feedback' status bars now check the array
   single_status for names of windows that should remain single even
   if $STATUS.DOUBLE is true. This elliminates the hideous hack that
   was being used previously to keep the msg window (window.dsm) from
   getting a double status.

 * Help section 1_Core renamed to 1_core_commands

 * New help section: 2_core_commands (empty)

 * Added help pages for all the included modules. They are located in
   $DS.HOME/help/3_modules/.

 * The default theme is once again 'darkstar'

 * New theme/statbar: feedback

3/20/02

 * [window.dsm 0.3.1] The /WJ alias should now work just like /JOIN.

3/14/02

 * [window.dsm 0.3] Changes regarding the msg window, including:
	- MSG_WINDOW_ARGS has been removed in favor of the following...
	- New config variables: MSG_WINDOW_LEVEL MSG_WINDOW_SIZE
	- Added some things to try and keep the msg window in shape when
	  other windows are killed. This is hopefully more sane than previous
	  attempts.

3/13/02

 * New important global variable: STATUS.DOUBLE - This should be made true
   or false within the status files. It can be used by modules to determine
   whether or not the current status bar wants to be double. Very helpful for
   anything that creates new windows.

 * [window.dsm 0.2] Fixed /WJ so that it does not affect the msg window.
   Also added a hack to /WK to keep it from returning you to a full-screen
   msg window after the current window is killed.

3/8/02

 * /PURGE once again only removes assign structures. As such, I have added
   a /PURGEALIAS command for removing alias structures. The module loader
   now takes advantage of both of these aliases which fixes a bug that caused
   module related structures to not be recursively removed.

3/6/02

 * [tabkey.dsm 0.6.1] Added tabkey.rmrule so that other modules can remove
   rules from within their cleanup queues.

3/4/02

 * The /PURGE command now purges both alias and assign structures.

 * HEADS UP: Some important commands for module writers have been renamed 
   for clarity. Changes are as follows:
	loader.dependency -> module.dep
	loader.load_saved_settings -> module.load_saved_settings

 * The contents of the MODINFO assign structure will now be displayed with
   /DINFO. I will not document the use of module info lines here. So for now,
   if you want to use these in your modules, please send me an email and I
   will be happy to explain them. Currently the away, keepnick, and tabkey
   modules take advantage of this.

 * [keepnick.dsm 0.2] Fixed a bug that would cause getnick to be deactivated
   when your current nick matched CONFIG.KEEPNICK_NICK but CONFIG.KEEPNICK
   was false. Also added a getnick related module info line.

 * [tabkey.dsm 0.6] Added a completion procedure and rule for themes. Also
   added a module info line related to completion rules.

3/2/02

 * [channel.dsm 0.2.3] CONFIG.CHANNEL_TS didn't include the numerical
   representation of the day of the month. Oops. The themes have been updated
   accordingly.

2/28/02

 * [away.dsm 1.2] If PUBLIC_AWAY is true, and you are not away, but attempt
   to unset away, no actions will be sent. We are also now displaying the
   amount of time you were away (formatted by $tdiff()) instead of the date
   of when you set away.

2/22/02

 * New function: $modinfo() - See comment in functions.dsc for details.

2/21/02

 * You can now pass multiple module names to /reloadmod.

2/18/02

 * [tabkey.dsm] Added /set completion as well as scripted command completion
   (instead of the built in command_completion).

2/17/02

 * HEADS UP: loader.get_saved_settings renamed to loader.load_saved_settings.
   This is a much better representation of its actual function and this
   seems to be the time to break backward compatibility ;-).

 * HEADS UP: Changed all occurrences of "elsif" to "else if". I figured since
   we're already heavily dependent on new features, making this change is
   actually a good idea. This will completely destroy backwards compatibility
   and force all users to upgrade.

 * HEADS UP: Changes to the "CONFIG *" and "FORMAT *" HOOK events. The old
   value of the variable being changed is now passed to these events instead
   of the new value. This is because the new value can already be accessed
   by the actual variable holding the value. This new behavior should be
   much more useful as modules can now easily reset the config or format
   variable to its previous value if the new value is undesirable.

 * Loading and unloading modules now triggers a HOOK event so that other
   modules can act on it. This was added mostly to allow other modules to
   add completion rules when the tabkey module is loaded but could be used
   for any number of things.

 * [tabkey.dsm] Rewrite. It should now be possible to add completion procedures
   that will automatically be available for use in completion rules. See the
   comments throughout the code for details.

2/9/02

 * Forgot to close a comment in loader.dsc above loader.dependency. Oops.

2/8/02

 * [channel.dsm] Removed the MAX_NICK_LENGTH config variable. Its use was
   completely unnecessary.

 * [away.dsm] Rewrote the way some things are handled internally. This
   shouldn't cause any changes in behavior.

1/21/02

 * [tabkey.dsm] Rewritten to support completion rules. What this means is
   that you can now change the behavior of this module without reloading it.
   If you want to know how to add your own rules, either look through the
   module or ask me. Still needs an easy user interface for addition/removal
   of rules and it probably needs to be optimized (still a lot of duplicate
   code).

1/20/02

 * Added support for modules versions. If the first line of a module matches
   the pattern "#version *" then the word after "#version" will be stored in
   the module_version array as that module's version. If no version is found
   a default of "0" will be used.

 * [misc.dsm] New format variable: WHO

1/17/02

 * [channel.dsm] Fixed join/leave aliases to take advantage of changes
   to the internal join/leave commands.

1/16/02

 * New command: /dinfo. Displays various information about the OS, client,
   and script.

1/15/02

 * Added $DS.COMMIT_ID. This is just like EPIC's commit_id. It will be
   incremented every time I do a CVS commit.

 * HEADS UP: Rewrote names.dsm to be a bit more configurable via /dset and
   /fset. This means we have some changes that will affect themes.
   Specifically, NAMES_OP and NAMES_VOICE have changed. There is also a
   new config variable (NAMES_COL) and a new format variable (NAMES_NONOP).
   See the included themes for examples.

 * Added $round() to functions.dsc.

1/14/02

 * Rewrote and optimized both themes.dsc and status.dsc. They still contain
   very similar code but are now much cleaner and more efficient.

 * [window.dsm] All keybindings are now returned to their original settings
   when the module is unloaded. The msg window will also be killed on unload.

 * Added /loader.get_saved_settings to loader.dsc. When executed from a
   loading module, this will force the saved settings for that module to be
   loaded before the module finishes loading. This is extremely useful for
   events occurring at module load time that depend on certain config settings.

 * [tabkey.dsm] Both tabkey.nick_routine() and tabkey.channel_routine() will
   now work correctly with channels/nicks containing "\". This should be much
   cleaner than yesterdays attempt at this. :-)


!! RELEASE: 0.1.4 (1/13/02) !!


1/13/02

 * Did some major cleanup in channel.dsm and misc.dsm.

 * [tabkey.dsm] tabkey.nick_routine() can now handle nicks containing "\"

 * [tabkey.dsm] Added $: (nick of the last person to join a channel you're on)
   to the list of nicks in tabkey.nick_routine().

 * Fixed a bug in config.dsc that was allowing boolean config variables to
   be set to literal values.

 * HEADS UP: Major changes to the way config and format variables are added
   by modules. All of the .def files (along with def/) have been removed in
   favor of the modules adding the variables themselves via /config.add and
   /format.add. See the included modules for examples.

1/11/02

 * [autocycle.dsm] Had a misnamed local variable that was causing auto-cycle
   not to work at all.

1/9/02

 * Optimized all code that prompts the user to enter something. Apparently
   the use of /while was unnecessary.

1/8/02

 * Fixed some cleanup issues in both misc.dsm and channel.dsm

 * [channel.dsm] /ban can now take multiple arguments, and both /ban and
   /tban will send the bans 4 at a time to the server.

 * [misc.dsm] New format variable: WHOIS_IDENTIFIED. The dancer ircd sends
   a 320 numeric for nicks that are identified with services. Hopefully
   other ircds don't use a different numeric.

1/4/02

 * [channel.dsm, autocycle.dsm] No longer using /quote to part/join channels.
   This should stop that referential integrity error from showing.

1/1/02

 * Added dependency support to the module loader. The list of a module's
   dependencies will be specified in its .def file. The keyword is "dep" and
   should be followed by a white-space separated list of modules.

   New config variable: AUTO_LOAD_DEPENDENCIES

 * [window.dsm] Killing the msg window will now set MSG_WINDOW to OFF.

12/29/01

 * Cleaned up the core scripts a bit.

 * Fixed a trivial bug in the module loader. Had a global variable that
   should have been local.

 * [keepnick.dsm] General cleanup and fixed a few minor bugs.


!! RELEASE: 0.1.3 (12/28/01) !!


12/28/01

 * The module loader now checks for duplicate config and format variables.

 * [tabkey.dsm] /loadmod, /reloadmod, and /unloadmod now have completion for
   all arguments, not just the first.

 * The darkstar status bar should now properly display nicks and channels
   containing \'s.

 * Forgot to escape some parentheses in the darkstar status bar.

 * Config variables were not being properly removed when modules were
   unloaded. Oops.

 * [window.dsm] Config variables renamed: AUTO_CREATE_MSG_WINDOW - > MSG_WINDOW
   and AUTO_CREATE_MSG_WINDOW_ARGS -> MSG_WINDOW_ARGS. The msg window will
   now also be created/killed when MSG_WINDOW is toggled.


!! RELEASE: 0.1.2 (12/25/01) !!


12/25/01

 * New core command: /loadedmodules

 * HEADS UP: Changes to the theme system. Each theme will now need to have
   its own directory (within one of the theme directories) containing
   <themename>.dst as well as individual files for each module. This solves
   the problem of modules not using theme settings when loaded after a theme
   has been chosen. I have also started using /assign rather than /fset to
   change format variables in themes, as it is far more efficient. Using /fset
   in your themes will still work, it just won't be as fast. See the two
   included themes for examples of the new theme format.

   Theme authors: The nature of these changes allow old themes to be easily
   converted to the new and more efficient format by following these easy
   steps:
	- Start a client running this version (or newer) of Darkstar.
	- Make sure all modules that you have theme settings for are currently
	  loaded.
	- /load ~/.darkstar/themes/<oldtheme>.dst
	- /save
	- mv ~/.darkstar/themes/custom ~/.darkstar/themes/<theme_name>

 * Fixed a bug in /unloadmod that was causing commands like "/unloadmod 1-3"
   and "/unloadmod 1 2 3" to not work.

12/24/01

 * [channel.dsm] New format variables: ACTION_CHANNEL, ACTION_CHANNEL_OTHER,
   SEND_ACTION_CHANNEL, and SEND_ACTION_CHANNEL_OTHER.

 * [misc.dsm] New format variables: ACTION_USER and SEND_ACTION_USER.

 * Regrettably I must break some some themes by changing the arguments passed
   to $fparse() for some of channel.dsm's format sets. The list of affected
   variables is as follows: CHANNEL_SIGNOFF, CHANNEL_SYNC, JOIN, and LEAVE.
   If your theme(s) use any of these variables you may need to adjust them
   slightly. I apologize for the inconvenience but this should make things
   much better in the long run.


!! RELEASE: 0.1.1 (12/23/01) !!


12/23/01

 * Rewrote large parts of the module loader (loader.dsc). Changes include:
	- Greatly improved error checking.
	- /loadmod and /unloadmod can now take multiple arguments.
	- Increased efficiency.
	- Down to 7449 bytes from 8962 bytes.

 * Added help pages for /less, /reload, /sv, and /uptime.

 * Forgot to unset NAMES_FOOTER in both themes.

 * Forgot to escape some ()'s in the darkstar status.

 * [names.dsm] Aliased /names to /scan to prevent people from accidentally
   executing the internal /names with no arguments.

 * [misc.dsm] /whowas will now display WHOIS_HEADER and WHOIS_FOOTER if present.

 * Moved /reload, /sv, and /uptime out of darkstar.irc and into commands.dsc.


!! RELEASE: 0.1.0 (12/22/01) !!


12/22/01

 * The core scripts have been documented!

 * The STRFTIME format variable has been removed as well as $getstrftime().
   I was using them to get around the problem of $cparse() and $strftime()
   using the same % codes. We now get around this by using "%%" to make a
   literal "%" anywhere $strftime() is used. Themes will need to be adjusted
   accordingly.

 * [autocycle.dsm] AUTO_CYCLE_OPLESS renamed to AUTO_CYCLE.

 * Renamed some internal functions to prevent them from showing up in
   command completion.

12/21/01

 * Format settings (/FSET) are now saved to $DS.USER_DIR/themes/custom.dst.
   This allows us to choose "custom" as our theme and simulate the
   pre-theme-support behavior (changes made with /fset will be remembered).

 * [window.dsm] The msg window (AUTO_CREATE_MSG_WINDOW) now defaults to OFF.

 * Various improvements and cleanups in save.dsc, themes.dsc, and status.dsc.

 * Made some internal changes to the way we keep track of config/format
   variables to avoid possible conflicts with the names of modules.

 * The epic4 theme is now the default.

 * The DEFAULT_THEME config variable has been renamed to THEME and will now
   change the theme if set to a valid theme name. See below.

 * The config script (config.dsc) will now hook any changes to config (not
   format) variables to the "hook" /on hook. The arguments it receives are
   as follows: CONFIG <variable name> <new value>

   This is mostly useful to module writers as they can now have code executed
   when a specific config variable is modified. If a variable has been
   removed (/dset -var) then no <new value> argument will be present.

12/20/01

 * Various cleanups in loader.dsc and save.dsc.

 * Save no longer saves any format settings. This is most likely a temporary
   change.

12/17/01

 * Apparently Linux systems don't understand $strftime(%+) so all occurrences
   of "%+" have been replaced with "%a %Ef %T %Z %Y".

 * Both themes now change BANNER to "***".

12/12/01

 * Fixed a bug in channel.dsm related to auto-response. Publics containing
   AUTO_RESPONSE_STR would not be displayed at all when AUTO_RESPONSE was OFF.

12/9/01

 * darkstar.irc will now remove the name of window #1 as well as set the level
   to "none". As such, this was removed from sample.dsrc.


!! RELEASE: 0.0.13 (12/3/01) !!


12/3/01

 * Improved support for channel completion in the tabkey module. If the first
   character of the last word on the input line is "#" the channel routine will
   be used. I add this at the last minute only because it is a very simple
   change, and a big improvement. I don't expect anything to break as a result.

12/2/01

 * The arguments passed to CTCP_REPLY have changed as of EPIC4-1.1 so themes
   will need to be adjusted accordingly.

 * HEADS UP! Modifications were made to the cleanup queues of several modules
   to take advantage of a fix made to /queue in EPIC4-1.1.2. As a result,
   the user will now be warned if their client is older than 12/3/01. The fix
   made to /queue involves the elimination of the initial evaluation made when
   the queue is first entered. What this means to module writers is they won't
   have to use so many escapes when removing certain /on hooks.

 * Darkstar should now warn the user more properly if their client does not
   meet the criteria for this script. In past versions the warning would be
   scrolled immediately off the screen by the module loader.

11/25/01

 * Small fix to /purge. (whitefang)

 * The included statbars were not using REVERSE_STATUS_LINE. They do now, and
   should work with EPIC4-1.1.

10/22/01

 * Fixed some small bugs that were causing the status/ and themes/ directories
   in the user directory to not work. (discovered by whitefang)

 * The "darkstar" statbar now resets the background color (via ^C-1) rather
   than specifically setting it to black.

10/21/01

 * [away.dsm] Auto-away and Auto-unset-away now both operate globally. Meaning
   they will set/unset away on all servers you are connected to. (whitefang)

 * [tabkey.dsm] Rewrite of tabkey.msg_routine() to be server-aware. This means
   you will now have separate nick histories for each server you are connected
   to. (requested by whitefang)

10/19/01

 * [functions.dsc] Added the $isloaded() function for determining whether
   a specific module is loaded or not. The $padright() function was also
   removed as it is identical to the builtin $pad() function, oops.


!! RELEASE: 0.0.12 (10/18/01) !!


10/18/01

 * Added $fparse2() to config.dsc. Works exactly the same as $fparse() except
   it does not pass its arguments through $cparse(). For the moment this is
   only being used by nickcomp.dsm. As a result, I am no longer replacing
   "^C-1" with "^C".

10/17/01

 * [keepnick.dsm] Fixed a bug discovered by whitefang and hop. Bad things
   can happen if you remove a /notify entry from within the notify_signoff
   hook. Instead we use /defer to execute it at a safer point in time.

 * [nickcomp.dsm] Now using $sar() instead of $tr() to strip "-1" out of
   text being sent to the channel. We also now look for "^C-1" and replace
   it with "^C" instead of just stripping all occurrences of "-1". Doing
   so is bad for obvious reasons.

 * [channel.dsm] Added the join/leave aliases from 2.8script. These may be
   removed later depending on upcoming changes to the internal /join command.

 * [away.dsm] Removed the "MsgLog Started/Stopped" timestamps as well as the
   "12:00" timestamp. This is because we now timestamp each individual message
   with both the date and time. The purpose for this change is to better
   support the use of multiple servers within a single EPIC process.

 * [away.dsm] Removed the /away and /back aliases.

 * [tabkey.dsm] Added support for file completion with /less.

 * [away.dsm] /readlog now uses /less provided by commands.dsc. Both /readlog
   and /remlog can now take a filename as an argument. You will also no
   longer be prompted to read your msglog when unsetting away.

 * New core script: commands.dsc. This file is just like functions.dsc except
   that it will contain commands not functions. I added a /less written by
   hop and I moved /purge from functions.dsc to commands.dsc.

10/16/01

 * [channel.dsm] Removed the join alias.

 * [nickcomp.dsm] Now strips off trailing "-1" that $cparse() adds. This is
   mostly because mIRC doesn't understand ^C-1 so users actually see the
   "-1" at the end of your text.


!! RELEASE: 0.0.11 (10/15/01) !!


10/15/01

 * Some changes to how we keep track of modules, statbars, and themes. The
   name and filenames are now kept in separate arrays. This fixes a potential
   problem with having similarly named modules/statbars/themes/etc. 

 * I am now passing more arguments to the various WHOIS_* format sets
   in misc.dsm. This allows for more customization of whois output via /fset.
   This will affect all themes that use these format sets.

 * Improved error checking in the theme loader. You should get a bit more
   information as to why loading a theme failed. I will also be adding this
   to the module loader at some point.

 * Removed the "blue" status bar. This, and others, will be distributed
   separately from now on.

 * Added a def/ directory in DS.USER. I accidentally left this out when I
   added user directory support. This is required in order for user directory
   modules to create /dset and /fset variables. Supporting this involved
   some changes in the way the module loader keeps track of modules.

10/14/01

 * [status.dsc] /status now supports the "-q" option which causes it to
   be quiet about the statbar change.

 * Major changes to theme support. Theme files are now just /load'd rather
   than parsed for keywords. This means that the format of the theme files has
   changed. See one of the included themes for details. The reason for all of
   this is so that themes can remove format variables, thus causing their
   hooks not to echo anything to the screen. This also involved changing
   a bunch of code in various modules.

 * [misc.dsm] New format variable SEND_CTCP.

 * [misc.dsm] New config variables SHOW_AWAY_ONCE and SHOW_AWAY_ONCE_TIMEOUT.
   This will stop you from seeing multiple 301 numerics (whois away).

 * I removed %D (DCC status) from the "darkstar" status bar as it caused rapid
   screen redraws. These redraws were enough to saturate the bandwidth on
   dialup connections.

10/12/01

 * Added /purge to functions.dsc (requested by whitefang).

 * [nickcomp.dsm] The new format variable NICK_COMPLETION now determines the
   formatting of nick completion output. The config variable
   NICK_COMPLETION_CHAR now determines the trigger character for nick completion.

 * Fixed a bug in the module loader that was causing /DSET and /FSET variables
   to not be removed upon unloading of their modules.

 * [away.dsm] Some pretty significant changes here. /AWAY and /BACK are now
   simple aliases to //AWAY that just reverse the default behavior from being
   local to global (The "-a" option is passed to //AWAY unless the "-l" option
   is passed to the aliases). Everything else is now hooked by the 305 and 306
   numerics. This also means that the DEFAULT_AWAY_REASON and
   DEFAULT_BACK_REASON config variables have been removed. You must now specify
   a reason manually if you wish to set yourself away. (requested by whitefang)

 * Theme support now actually works ;)

 * Now supports what I call a "user directory." This is just a place where
   you can store your own modules, statbars, and themes, as well as saved
   settings. This involved changes to most of the core scripts.

 * Darkstar will now automatically create the "user directory"
   (env. var. DARKSTAR_USER or ~/.darkstar by default) if it is not found.
   The following subdirectories are also created:
	modules/        save/           status/         themes/

10/11/01

 * /LOADMOD and /UNLOADMOD can now take either module names or an integer as
   an argument. (requested by whitefang)

10/8/01

 * [tabkey.dsm] New config variable: TABKEY_NICKCOMP_SUFFIX. This will be
   appended to the end of the nick, before the space, when an exact match is
   found and the nick is the first word on the input line. (Requested by
   whitefang and stshatter)

 * New format for the ChangeLog, as you can see. :-)


--

[0.0.10]

 - [loader.dsc] The module list will no longer be displayed if AUTO_LOAD_PROMPT
   is false. (whitefang)
 - [loader.dsc] Went through a bit of a rewrite.
 - New config variable: DEFAULT_THEME. This is now how you should be setting
   your default theme. You can remove the "status" line from your rcfiles.
 - Theme support! Theme files will be kept in $DS.HOME/themes/ default and must
   have an extension of ".dst". Have a look at the darkstar theme for an
   example of creating a theme.
 - New status bar called "blue". Created by stshatter.
 - Moved the defaults/ directory to def/.
 - Now understands both dset/fset as well as config/format as keywords in the
   *.def files.
 - [channel.dsm] New format variable CHANNEL_TS for displaying channel
   timestamps.
 - Both the "darkstar" and "epic4" status bars now change window double for
   ALL open windows instead of just the current one.
 - [tabkey.dsm] Now checks for $CMDCHARS instead of "/" (yes this was stupid).
 - [tabkey.dsm] Now lists each variable on a separate line when displaying
   matches in the set routine.
 - [misc.dsm] New fsets: WHOIS_HEADER and WHOIS_FOOTER
 - Fixed a bunch of bugs in the "epic4" statbar (Thanks to Jeremy Nelson).
 - [status.dsc] /status now displays a list of available statbars and prompts
   the user to choose one if no arguments are given.
 - Global variable renaming: DS.VERSION -> DS.INTERNAL_VERSION,
   DS.VER -> DS.VERSION. This wont affect end users.
 - [away.dsm] Finally stopped using $common() when checking
   PUBLIC_AWAY_CHANNELS. This allows for channel names containing "/", a
   valid character in channel names.
 - New environment variable: DARKSTAR_SAVEDIR. The SAVE_DIRECTORY config
   variable has been removed entirely. Please use the previously mentioned
   environment variable to change the default save directory.
 - Changes to the format of the defaults files. Boolean config variables now
   need to be specified with the "bool" keyword. Everything else is taken as
   a literal config variable (opposite of old behaviour).
 - Renamed "scan.dsm" to "names.dsm". /scano, /scann, and /scanv were
   also added. 
 - [core] Status bar directory moved from statbars/ to status/. Complete
   rewrite of the /status command (/statbar). Status files can now have any
   name they want instead of status.1, status.2, etc. The DEFAULT_STATUS
   config variable was also removed.
 - [core] Changes to allow the use of ON/OFF and 1/0 with /dset. The defaults
   files can now take an optional argument to the "config" command: lit
   This tells the script that that variable has a literal value and should not
   be converted to/from on/off/1/0. Two new functions: $convert.num() and
   $convert.onoff().
 - [tabkey.dsm] Support for /save module completion added.
 - [save.dsc] Now allows you to specify a save directory as well as a list of
   modules. Usage: /save [-d <dir>] [*|module1] [module2] [...]
   If no modules are specified, settings for all modules, plus the core, are
   saved. [module] can be any currently loaded module or "core" to save the
   core script settings.


[0.0.9]

 - [loader.dsc] Variables and aliases in structures named after the module
   are now automatically removed when a module is unloaded. They no longer
   need to be removed by the module itself in its cleanup queue. (This is
   any alias or variable preceded by "modulename.")
 - [tabkey.dsm] File completion can now handle the use of ~ and will now
   display all matches if more than one is found.
 - [tabkey.dsm] Now supports command completion.
 - [away.dsm] Only replies to messages now if SEND_AWAY_NOTICE is true.
 - [oper.dsm] Added /operwall.
 - [away.dsm] Now uses the internal variable $A to determine if away or not.
   This fixes a bug that caused the script to think we're not away when the
   server says we are.
 - New dset variable: AUTO_LOAD_PROMPT - If true, you will be asked on startup
   which modules you would like to load (old behaviour). If false, the modules
   listed in AUTO_LOAD_MODULES will be loaded without prompting the user.
   (Requested by tokage)
 - Slight change to the format of the defaults files.
 - Fixed a bug in auto-response where public_other's would display the nick
   twice. (Discovered by myke)
 - Some speed improvements and general cleanup. Removed a bunch of $common()'s
   which are quite expensive. (Thanks to Jeremy Nelson for pointing these out)


[0.0.8]

 - [config.dsc/functions.dsc] Moved $fparse() and $setcat() from functions.dsc
   to config.dsc.
 - [channel.dsm] New fset: TOPIC_CHANGE. Added two new aliases: /oldtopic
   (displays old topic) and /setoldtopic (sets topic to old topic). (Requested
   by BlackJac).
 - Slight change to the license. See the 'COPYRIGHT' file for details.
 - [channel.dsm] Now supports showing op/voice in publics.
   New fset: SHOW_OPVOICE_IN_PUBLICS.
 - [darkstar.irc] Fixed a bug where cleanup queue's weren't being removed
   during a /reload.
 - Broke up fsets.dsm into channel.dsm (channel related stuff) and misc.dsm.
   autoresponse.dsm was also merged into channel.dsm
 - [functions.dsc] Removed $getsamechars() as it is no longer needed. The
   built-in function $prefix() performs the same task.
 - Reverted every occurrence of "$(K)$(K)" back to "//" since EPIC always
   treats "//" as special regardless of $CMDCHARS.
 - [misc.dsm] Added /dns and /nslookup. (Requested by myke)
 - [darkstar.irc] Now allows the use of the following environment variables:
   DARKSTAR_HOME, DARKSTAR_RC, DARKSTAR_SAVE_DIR. Their purpose should be
   pretty obvious. This replaces the "Config Section" in darkstar.irc and
   should no longer be edited. The new default directory is ~/darkstar.
   Also made the $get_core_settings() function run a little faster.
 - [keepnick.dsm] Getnick will now disable itself if it discovers that you
   are already using the nick it wants. Also fixed a big that would cause
   getnick to be stuck on.
 - [save.dsc] Was not saving core script settings *oops*. It does now.
 - Moved core/fsets.dsc to modules/fsets.dsm. The banlist hooks and da5id's
   who hook were also moved from fsets.dsm to misc.dsm.
 - [away.dsm] Now keeps track of how many new msgs you have.
 - [tabkey.dsm] Lots of changes and new completion triggers. Added /cleartab
   to clear the tabkey nick history. (requested by tokage).
 - [scan.dsm] Fixed a small bug that would cause /scan not to work on channels
   that had "/" in them. Fixed by replacing $common() with $match().
   (discovered by kasper)


[0.0.7]

 - [away.dsm] Forgot to convert some global variables to the new style. Also
   fixed a bug where /readlog would attempt to open your logfile regardless
   of whether it existed or not. (discovered by myke)
 - [functions.dsc] Added function $getsamechars() for returning all the
   characters that are the same between two words leading up to the point
   where they first differ.
 - [tabkey.dsm] Now includes support for nick completion and file completion.
   The current triggers are /m, /msg, /dcc, and /load. Everything else triggers
   the nick completion. Eventually I would like to be able to add/remove
   tabkey triggers on the fly.
 - All core script files have been renamed from *.ds to *.dsc
 - [loader.dsc] Added a /reloadmod command. Just performs /unloadmod and
   /loadmod for you.
 - [away.dsm] Now prompts you to read your msglog when setting yourself back.
 - [functions.dsc] Fixed a bug in $getsamechars() which was causing it to
   return matching characters after failing on previous characters.
 - Help system added! The code for /dhelp is located in core/help.dsc and was
   provided by Tyler Hall (thanks!). It uses EPIC's built-in help system so
   not much code had to be added. No actual help files just yet.. but expect
   some in the next release.
 - [save.dsc] Fixed a bug that was causing some module settings not to be
   saved.
 - Moved $getov() out of functions.dsc and into scan.dsm as $scan.getov()


[0.0.6]

 - Added global variable $DS.RCFILE (default: ~/.epic4/.dsrc) and the file
   sample.dsrc
 - Added /reload to darkstar.irc
 - [misc.dsm] /join no longer requires a leading # for channels names. If
   a '#' or '&' is preceding the channel name, nothing will be done and it
   will be passed to //join. If neither '#' nor '&' are found the script will
   automatically add a '#' to the beginning of the channel name and pass it on
   to //join. (requested by myke)
 - [misc.dsm] /lk now asks you if you're sure you want to kick all non-ops.
 - [misc.dsm] Added /invite and /i.
 - [autocycle.dsm] Cleaned things up a bit.
 - Fixed a small bug in statbar.2 where channels without modes would have an
   extra ']' on the statbar.
 - Moved all the /scan stuff out of core/fset.ds and into a module (scan.dsm)
 - MAJOR CHANGES TO CORE: All /dset's (/config) and /fset's are now completely
   modular, yet do not appear as such to the user. Specifying a module # when
   using /config is no longer necessary and saved settings are now safe from
   being overwritten. Many changes to the rest of the core script (and even
   modules) had to made in order to implement this. /dset and /fset are now
   located in 'core/config.ds' and the on hooks for /fset have been moved to
   'core/fsets.ds'. Changes to the format of the defaults files also had to be
   made. Please see the 'README' file for details.
 - Replaced all occurrences of "//" with "$(K)$(K)" to allow users to change
   $CMDCHARS without breaking anything.


[0.0.5]

 - Fixed small bug in autocycle.dsm (found by RoboHak)
 - Fixed numerous bugs in /loadmod and /unloadmod (original problem discovered
   by defiler)
 - Syntax changes to /deop, /devoice, and /op. When specifying multiple nicks
   white space must now be used to separate the nicks rather than commas.
 - The "Insert" and "Delete" keys now scroll the msg window up/down. Thanks
   to adm for this. The F12 key now clears the msg window.
 - Added /tempban to modules/misc.dsm
 - Shaved about 1600 bytes off core/loader.ds getting rid of some of the
   duplicate code for /loadmod, /unloadmod, and the auto-loader.


[0.0.4]

 - More speed improvements
 - Added /untopic to misc.dsm
 - Fixed a bug in statbar.ds where the statbar wouldn't completely update
   after being changed.
 - Many improvements to the module loader (core/loader.ds). /loadmod and
   /unloadmod now behave like /tban if given no arguments.
 - Changes to core/save.ds. /save now takes arguments for saving specific
   settings (-a, -c, -f, -m).
 - Lots of small changes not worth mentioning.
 - New /fsets: CHANNEL_NICK, CTCP, CTCP_REPLY, MODE, and UMODE.
 - Fixed a bug found in both /config and /fset where specifying an exact
   variable would result in the variable not being found.


[0.0.3]

 - Removed $isnum() and $ischan() from functions.ds. Use $isnumber() and
   $ischannel() now.
 - Made some speed improvements to /scan
 - Fixed a bug in /config where you couldn't see/change options for the
   last module. (found by Tilt)
 - Major re-write of both /fset and /config. Also removed $add_config_var()
   and $add_fset() as they are no longer needed.
 - Wrote a /save (core/save.ds).
 - New function: $setcat()  Performs the old duties of $_configcat() and
   $_fsetcat().
 - Moved functions $getov(), $getstrftime(), and $fparse() to
   core/functions.ds
 - Now using /queue to allow modules to specify exactly what needs to be
   cleaned up during unloading. You can now use /unloadmod *yay*


[0.0.2]

 - Added a config manager (core/config.ds)
 - /fset is now part of the core script and is located in the core/ directory.
   Several bugs in /fset were also fixed.
 - All modules and core scripts updated to use new /config.
 - Added a defaults/ directory and $DS.DEFAULTS_DIR for loading default
   settings. Module settings (/config) are loaded automatically by
   $load_module() but default formats must be loaded by the module itself.
 - All module filename extensions must now be .dsm
 - Added core/save.ds for saving /config and /fset settings. (/save)
 - Added /key and /unkey to misc.dsm
 - /cycle now supports the existence of channel keys.
 - Moved the status bar stuff into the core of the script (core/statbar.ds)
   Status bars are now stored in $DS.STATBAR_DIR (statbars/)
 - Many improvements to the loader.


[0.0.1]

 - Initial beta or whatever you wanna call it.


#EOF.